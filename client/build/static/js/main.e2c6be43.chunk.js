(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{72:function(e,t,n){},76:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n(37),r=n.n(c),s=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,83)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),r(e),s(e)}))},i=n(6),o=n.n(i),d=n(12),u=n(2),l=n(10),f=n.n(l),m=n(38),b=n(39),j=n(44),p=n(43),h=n(1),y=function(e){Object(j.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(m.a)(this,n),(a=t.call(this,e)).state={time:new Date,clockOn:setInterval((function(){return a.tick()}),1e3)},a}return Object(b.a)(n,[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){clearInterval(this.state.clockOn)}},{key:"tick",value:function(){this.setState({time:new Date})}},{key:"render",value:function(){return Object(h.jsx)("div",{children:Object(h.jsx)("h2",{children:this.state.time.toLocaleTimeString()})})}}]),n}(a.Component),O=n(3),v=n(11);var x=function(){var e=Object(v.useStateIfMounted)(),t=Object(u.a)(e,2),n=t[0],c=t[1],r=Object(v.useStateIfMounted)(),s=Object(u.a)(r,2),i=s[0],l=s[1],m=Object(v.useStateIfMounted)(),b=Object(u.a)(m,2),j=b[0],p=b[1],x=Object(v.useStateIfMounted)(!1),B=Object(u.a)(x,2),g=B[0],I=B[1],S=Object(O.f)(),k=function(e){e.classList.add("selectedBtn"),setTimeout((function(){e.classList.remove("selectedBtn")}),300)},w=function(){setTimeout((function(){f.a.get("/api/number").then((function(e){var t;c(e.data[0].number),l((t=e.data[0].lastSpleef,new Date(t).toLocaleDateString("fr-FR",{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric"}))),p(e.data[0]._id),I(!0)})).catch((function(){c(0),p(""),l(""),I(!0)}))}),500)},E=function(){var e=Object(d.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k(document.getElementById("restart")),e.next=3,f.a.delete("/api/reset");case 3:document.getElementById("firstSpleef").style.display="flex",document.getElementById("otherSpleefs").style.display="none",c(0);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),L=function(){var e=Object(d.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k(document.getElementById("firstSpleef")),e.next=3,f.a.post("/api/spleef").then((function(){document.getElementById("firstSpleef").style.display="none",document.getElementById("otherSpleefs").style.display="flex",w()}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),N=function(){var e=Object(d.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k(document.getElementById("otherSpleefs")),t={number:n+1,lastSpleef:new Date},e.next=4,f.a.put("/api/spleef/".concat(j),t);case 4:w();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),C=function(){var e=Object(d.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:k(document.getElementById("leaderboardButton")),setTimeout((function(){S("/leaderboard")}),100);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){w(),0===n&&setTimeout((function(){I(!0)}),500),g&&(0!==n?(document.getElementById("firstSpleef").style.display="none",document.getElementById("otherSpleefs").style.display="flex"):(document.getElementById("firstSpleef").style.display="flex",document.getElementById("otherSpleefs").style.display="none"))})),Object(h.jsx)("div",{className:"App",children:Object(h.jsx)("div",{id:"app",children:Object(h.jsxs)("div",{className:"drugBox",children:[Object(h.jsx)("h1",{children:"How many joints ?"}),n||0===n?Object(h.jsxs)("div",{className:"dataZone",children:[Object(h.jsx)("p",{className:"spleefNumber",children:n}),Object(h.jsx)("p",{children:i&&"Last joint on the : ".concat(i)}),Object(h.jsx)(y,{})]}):Object(h.jsx)("div",{id:"homeLoader"}),g?Object(h.jsxs)("div",{id:"btnBlock",children:[Object(h.jsx)("div",{className:"btn",id:"firstSpleef",onClick:L,type:"submit",children:"Smoke"}),Object(h.jsx)("div",{className:"btn",style:{display:"none"},id:"otherSpleefs",onClick:N,type:"submit",children:"Smoke"}),Object(h.jsx)("div",{className:"btn",id:"restart",onClick:E,children:"Restart"})]}):"",Object(h.jsx)("div",{className:"btn",id:"leaderboardButton",onClick:C,children:"Leaderboard"})]})})})},B=(n(72),n(22)),g=n.p+"static/media/leaderBoard.9fd4c87c.gif",I=n(40),S=n(13),k=n(41),w=n(82);S.b.add(k.a);var E=function(){var e=Object(O.f)(),t=Object(v.useStateIfMounted)(),n=Object(u.a)(t,2),c=n[0],r=n[1],s=Object(v.useStateIfMounted)(),i=Object(u.a)(s,2),l=i[0],m=i[1],b=Object(v.useStateIfMounted)(),j=Object(u.a)(b,2),p=j[0],y=j[1],x=Object(v.useStateIfMounted)([]),B=Object(u.a)(x,2),S=B[0],k=B[1],E=Object(v.useStateIfMounted)(!1),L=Object(u.a)(E,2),N=L[0],C=L[1],D=function(e){return new Date(e).toLocaleDateString("fr-FR",{year:"numeric",month:"numeric",day:"numeric"})},T=function(){f.a.get("/api/leaderboard").then((function(e){k(e.data),C(!0)}))},M=function(e){e.classList.add("selectedBtn"),setTimeout((function(){e.classList.remove("selectedBtn")}),300)},F=function(){var e=Object(d.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return M(document.getElementById("saveButton")),t={number:c,date:l},e.next=4,f.a.post("/api/leaderboard",t).then((function(){T()}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),R=function(){var e=Object(d.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return M(document.getElementById("resaveButton")),e.next=3,{number:c};case 3:t=e.sent,f.a.put("/api/leaderboard/"+p,t).then((function(){T(),setTimeout((function(){document.getElementById("resaveButton").style.display="none"}),300)}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_=function(){var e=Object(d.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.delete("/api/leaderboard").then((function(){T(),setTimeout((function(){document.getElementById("resaveButton").style.display="none",document.getElementById("resetLeaderboard").style.display="none",document.getElementById("saveButton").style.display="flex"}),450)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){N||(f.a.get("api/number/").then((function(e){r(e.data[0].number),m(new Date)})).catch((function(e){r(0),m(new Date)})),T()),0!==S.length&&N?(document.getElementById("leaderboardSettings").style.display="flex",D(S.slice(-1)[0].date).includes(D(new Date))&&(document.getElementById("saveButton").style.display="none",S.slice(-1)[0].number<c&&(document.getElementById("resaveButton").style.display="flex",y(S.slice(-1)[0]._id)))):0===S.length&&N&&(document.getElementById("leaderboardSettings").style.display="none")})),Object(h.jsx)("div",{id:"leaderboard",children:Object(h.jsxs)("div",{className:"leaderBox",children:[N&&Object(h.jsx)("div",{id:"leaderboardSettings",children:Object(h.jsxs)(w.a,{children:[Object(h.jsx)(w.a.Toggle,{variant:"secondary",id:"dropdown-basic",children:Object(h.jsx)(I.a,{icon:"fa-solid fa-gear"})}),Object(h.jsx)(w.a.Menu,{children:Object(h.jsx)(w.a.Item,{onClick:_,id:"resetLeaderboard",children:"Reset leaderboard"})})]})}),N?Object(h.jsx)("h2",{children:"Leaderboard"}):Object(h.jsx)("div",{children:Object(h.jsx)("img",{src:g,alt:"loader"})}),Object(h.jsx)("ul",{children:S&&S.map((function(e){return Object(h.jsxs)("li",{children:[e.number," joints on the ",D(e.date)]},e._id)}))}),N?Object(h.jsxs)("div",{className:"leaderboardButtons",children:[Object(h.jsx)("div",{onClick:function(){M(document.getElementById("backButton")),setTimeout((function(){e("/")}),100)},className:"btn",id:"backButton",children:"Back"}),Object(h.jsx)("div",{onClick:F,className:"btn",id:"saveButton",children:"Save"}),Object(h.jsx)("div",{onClick:R,className:"btn",id:"resaveButton",children:"Save"})]}):""]})})};r.a.render(Object(h.jsx)(B.a,{children:Object(h.jsxs)(O.c,{children:[Object(h.jsx)(O.a,{path:"/*",index:!0,element:Object(h.jsx)(x,{})}),Object(h.jsx)(O.a,{path:"/leaderboard",index:!0,element:Object(h.jsx)(E,{})})]})}),document.getElementById("root")),s()}},[[76,1,2]]]);
//# sourceMappingURL=main.e2c6be43.chunk.js.map